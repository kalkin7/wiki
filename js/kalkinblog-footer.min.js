var majusculeFirst=function(str){var temp=str.charAt(0).toUpperCase();for(var i=1;i<str.length;i++){temp+=str.charAt(i).toLowerCase();}
return temp;}
var getParam=function(param){var queryString=window.location.search.substring(1),queries=queryString.split("&");for(var i in queries){var pair=queries[i].split("=");if(pair[0]==param){return pair[1];}}
return null;};var filterPostsByPropertyValue=function(posts,property,value){var filteredPosts=[];posts.pop();for(var i in posts){var post=posts[i],prop=post[property];post.tags.pop();if(prop.constructor==String){if(prop.toLowerCase()==value.toLowerCase()){filteredPosts.push(post);}}else if(prop.constructor==Array){for(var j in prop){if(prop[j].toLowerCase()==value.toLowerCase()){filteredPosts.push(post);}}}}
return filteredPosts;};var layoutResultsPage=function(property,value,posts){var $container=$('#results');if($container.length==0)return;var str=" 태그 글목록 : "+majusculeFirst(value);$container.find('h1').text(str);for(var i in posts){var tagsList='<ul class="tags cf">',post=posts[i],tags=post.tags;for(var j in tags){tagsList+='<li><a href="/search/?tags='+tags[j]+'">'+tags[j].toLowerCase()+'</a></li>';}
tagsList+='</ul>';$container.find('ul.results').append('<li>'+'<a href="'+post.href+'">'+posts[i].title+'</a>'+' <span class="date">- '+posts[i].date.year+'년 '+posts[i].date.month+'월 '+posts[i].date.day+'일 '+'</span>'+tagsList+'</li>');}}
var noResultsPage=function(property,value){var $container=$('#results');if($container.length==0)return;$container.find('h1').text('아무것도 찾을 수 없습니다.').after('<p class="nadda"></p>');var txt="죄송합니다. 입력한 검색어 '"+value+"' 에 해당하는 항목이 없습니다. 다른 키워드로 바꿔서 시도해보세요.";$container.find('p.nadda').text(txt);};var replaceERBTags=function(elements){elements.each(function(){var $this=$(this),txt=$this.html();txt=txt.replace(new RegExp("&lt;%=(.+?)%&gt;","g"),"{{$1}}");txt=txt.replace(new RegExp("&lt;%(.+?)%&gt;","g"),"{%$1%}");$this.html(txt);});};$(function(){var map={'category':getParam('category'),'tags':getParam('tags'),'search':getParam('search')};$.each(map,function(type,value){if(value!==null){$.getJSON('/search.json',function(data){posts=filterPostsByPropertyValue(data,type,value);if(posts.length===0){noResultsPage(type,value);}else{layoutResultsPage(type,value,posts);}});}});replaceERBTags($('div.highlight').find('code.text'));replaceERBTags($('p code'));});$(document).ready(function(){$('#post a').filter(function(){return this.hostname&&this.hostname!==location.hostname;}).addClass('externalLink').attr('target','_blank');});(function(d){d.fn.toc=function(j){var l=d.extend({},d.fn.toc.defaults,j);var n=this.append("<ul></ul>").children("ul");var m={h1:0,h2:0,h3:0,h4:0,h5:0,h6:0};var h=0;var g={h1:0,h2:0,h3:0,h4:0,h5:0,h6:0};for(var k=1;k<=6;k++){g["h"+k]=(l.exclude.match(new RegExp("h"+k,"i"))===null&&d("h"+k).length>0)?++h:0}return this.each(function(){d(l.context+" :header").not(l.exclude).each(function(){var p=d(this);for(var o=6;o>=1;o--){if(p.is("h"+o)){if(l.numerate){b(m["h"+o],n);c(m,"h"+o);if(l.autoId&&!p.attr("id")){p.attr("id",a(p.text()))}p.text(f(m,"h"+o,p.text()))}e(n,g["h"+o],p.attr("id"),p.text())}}})})};function b(h,g){if(h===0&&g.find(":last").length!==0&&!g.find(":last").is("ul")){g.find("li:last").append("<ul></ul>")}}function c(g,h){d.each(g,function(j,k){if(j===h){++g[j]}else{if(j>h){g[j]=0}}})}function a(g){return g.replace(/[ <>#\/\\?&\n]/g,"_")}function f(i,j,h){var g="";d.each(i,function(k,l){if(k<=j&&i[k]>0){g+=i[k]+"."}});return g+" "+h}function e(m,g,l,k){var j=m;for(var h=1;h<g;h++){if(j.find("> li:last > ul").length===0){j.append("<li><ul></ul></li>")}j=j.find("> li:last > ul:first")}if(l===""){j.append("<li>"+k+"</li>")}else{j.append('<li><a href="#'+l+'">'+k+"</a></li>")}}d.fn.toc.defaults={exclude:"h1, h5, h6",context:"",autoId:false,numerate:true}})(jQuery);