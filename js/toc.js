/* TOC Generator JS */
(function(f){f.fn.toc=function(d){var c=f.extend({},f.fn.toc.defaults,d);var e=this.append('<p class="toc_title">목차</p><ul></ul>').children('ul');var g={h1:0,h2:0,h3:0,h4:0,h5:0,h6:0};var j=0;var i={h1:0,h2:0,h3:0,h4:0,h5:0,h6:0};for(var h=1;h<=6;h++){i['h'+h]=(c.exclude.match(new RegExp('h'+h,'i'))===null&&f('h'+h).length>0)?++j:0}return this.each(function(){f(c.context+' :header').not(c.exclude).each(function(){var a=f(this);for(var b=6;b>=1;b--){if(a.is('h'+b)){if(c.numerate){k(g['h'+b],e);l(g,'h'+b);if(c.autoId&&!a.attr('id')){a.attr('id',m(a.text()))}a.text(n(g,'h'+b,a.text()))}o(e,i['h'+b],a.attr('id'),a.text())}}})})};function k(a,b){if(a===0&&b.find(':last').length!==0&&!b.find(':last').is('ul')){b.find('li:last').append('<ul></ul>')}};function l(d,c){f.each(d,function(a,b){if(a===c){++d[a]}else if(a>c){d[a]=0}})};function m(a){return a.replace(/[ <>#\/\\?&\n]/g,'_')};function n(d,c,e){var g='';f.each(d,function(a,b){if(a<=c&&d[a]>0){g+=d[a]+'.'}});return g+' '+e};function o(a,b,d,c){var e=a;for(var g=1;g<b;g++){if(e.find('> li:last > ul').length===0){e.append('<li><ul></ul></li>')}e=e.find('> li:last > ul:first')}if(d===''){e.append('<li>'+c+'</li>')}else{e.append('<li><a href="#'+d+'">'+c+'</a></li>')}};f.fn.toc.defaults={exclude:'h1, h5, h6',context:'',autoId:false,numerate:true}})(jQuery);